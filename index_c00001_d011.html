<!DOCTYPE HTML>
<html>
	<head>
		<title>Understanding the Hive in: Bijen van Daan</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body>
 
		<!-- Header -->
			<header id="header" class="alt">
				<div class="logo"><a href="index_c00001_d011.html"><span>Home</span></a></div>
				<a href="#menu">Menu</a>
			</header>
 
		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="index_c00001_d011.html">Home</a></li>
					<li><a href="credits.html">Credits</a></li>
				</ul>
			</nav>
 
		<!-- Banner -->
			<section class="banner half">
				<article>
					<img src="images/c00001_d011_1.jpg" alt="" />
					<div class="inner">
						<header>
							<p>Deze konigin heeft twee keer gezwermd afgelopen zomer.</p>
							<h2>Bijen van Daan</h2>
						</header>
					</div>
				</article>
				<article>
					<img src="images/c00001_d011_2.jpg" alt="" />
					<div class="inner">
						<header>
							<p>De bijen zaten de eerste keer in een boom en later op een stam.</p>
							<h2>Bijen van Daan</h2>
						</header>
					</div>
				</article>
				<article>
					<img src="images/c00001_d011_3.jpg"  alt="" />
					<div class="inner">
						<header>
							<p>Minstens 3 meter hoog. Toch heeft het volk een nieuwe kast gekregen.</p>
							<h2>Bijen van Daan</h2>
						</header>
					</div>
				</article>
				<article>
					<img src="images/c00001_d011_4.jpg"  alt="" />
					<div class="inner">
						<header>
							<p>Minstens 3 meter hoog. Toch heeft het volk een nieuwe kast gekregen.</p>
							<h2>Bijen van Daan</h2>
						</header>
					</div>
				</article>
				<article>
					<img src="images/c00001_d011_5.jpg"  alt="" />
					<div class="inner">
						<header>
							<p>Zomers is hier een weldaad aan bijen te bespeuren.</p>
							<h2>Bijen van Daan</h2>
						</header>
					</div>
				</article>
			</section>
 
<!-- Chat -->
			<section id="two" class="wrapper style3">
				<div class="inner">
					<header class="align-center">
					    <p><strong>Status:</strong> <span id="status">Connecting...</span></p>
					    <input type="text" id="message" placeholder="Enter message">
					    <button onclick="publishMessage()">Send</button>
					    <h2>Received Messages:</h2>
					    <ul id="messages"></ul>
					</header>
				</div>
			</section>
 
 
<!-- Zero -->
			<section id="one" class="wrapper style2">
				<div class="inner">
					<div class="grid-style">
 
 
 
						<div>
							<div class="box">
								
								<div class="content">
									<header class="align-center">
										<p>Overbosch is een haagse tuincomplex dat elk jaar weer via verloting tuintjes verdeeld. De honing is verkrijgbaar op twee zondagen in de zomer.</p>
									</header>
									<p>{information_text}</p>
									<a href="https://www.daanbijkerk.nl/overbosch.html>Visit our homepage</a>
									<footer class="align-center">
										<a href="#" class="button alt">TODO</a>
									</footer>
								</div>
							</div>
						</div>
 
					</div>
				</div>
			</section>
 
 
		<!-- One -->
			<section id="one" class="wrapper style2">
				<div class="inner">
					<div class="grid-style">
 
						<div>
							<div class="box">
								<div class="image fit">
									<img src="images/c00001_d0111.svg" alt="" />
								</div>
								<div class="content">
									<header class="align-center">
										<p>Het project </p>
										<h2>Beehive Monitoring System Overview</h2>
									</header>
									<p>Ever wondered what’s happening inside a beehive? Our smart monitoring system tracks hive conditions in real-time. Built into a weatherproof box, it connects to WiFi, updates automatically, and runs on solar power with a backup battery.  It measures temperature, humidity, air pressure, light, and even hive sounds. Using advanced analysis, it estimates height, detects sound intensity, and tracks frequency changes. The 'Spaarkast' version includes extra insulation and a durable protective coating.  This system provides valuable insights into hive health, helping beekeepers monitor their colonies more efficiently.</p>
									<footer class="align-center">
										<a href="#" class="button alt">TODO</a>
									</footer>
								</div>
							</div>
						</div>
 
						<div>
							<div class="box">
								<div class="image fit">
									<img src="images/c00001_d0112.svg" alt="" />
								</div>
								<div class="content">
									<header class="align-center">
										<p>Data</p>
										<h2>Temperature</h2>
									</header>
									<p>Bees carefully manage hive temperature, especially in winter. Instead of heating the whole hive, they keep their cluster warm, reaching about 35°C at the center. Heat naturally rises, so the area above the cluster stays warmer, making top insulation useful for reducing heat loss.  A common myth is that leaving a honey super makes heating harder for bees. In reality, it acts as insulation, helping stabilize temperatures. Plus, honey near the cluster stays warm enough to eat, ensuring bees have easy access to food throughout winter.</p>
									<footer class="align-center">
										<a href="#" class="button alt">TODO</a>
									</footer>
								</div>
							</div>
						</div>
 
					</div>
				</div>
			</section>
 
		<!-- Two -->
			<section id="two" class="wrapper style3">
				<div class="inner">
					<header class="align-center">
						<p>Extra informatie</p>
						<h2>Bekijk alle gegevens</h2>
					</header>
				</div>
			</section>
 
		<!-- Three -->
			<section id="three" class="wrapper style2">
				<div class="inner">
					<header class="align-center">
						<p class="special">(relatieve) luchtvochtigheid, licht, audio en (relatieve) luchtdruk</p>
						<h2>Alle grafieken</h2>
					</header>
					<div class="gallery">
						<div>
							<div class="image fit">
								<a href="#"><img src="images/c00001_d0113.svg" alt="" /></a>
							</div>
						</div>
						<div>
							<div class="image fit">
								<a href="#"><img src="images/c00001_d0114.svg" alt="" /></a>
							</div>
						</div>
						<div>
							<div class="image fit">
								<a href="#"><img src="images/c00001_d0115.svg" alt="" /></a>
							</div>
						</div>
						<div>
							<div class="image fit">
								<a href="#"><img src="images/c00001_d0116.svg" alt="" /></a>
							</div>
						</div>
					</div>
				</div>
			</section>
 
		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
		<script>
		        const broker = "wss://k9931f8c.ala.eu-central-1.emqxsl.com:8084/mqtt";
		        const clientId = "mqtt_test_client_" + Math.random().toString(16).substr(2, 8);
		        const options = {
		            clientId: clientId,
		            clean: true,
		            connectTimeout: 4000,
		            username: "qr_code_user", // Add your EMQX username
				    password: "qr_code_password", // Add your EMQX password
		        };
		
		        const client = mqtt.connect(broker, options);
		
		        client.on("connect", () => {
		            document.getElementById("status").textContent = "Connected";
		            console.log("Connected to MQTT Broker");
		            client.subscribe("v000/c00001/d011/answer", (err) => {
		                if (err) console.error("Subscribe error:", err);
		            });
		        });
		
		        client.on("message", (topic, message) => {
		            console.log(`Received message: ${message.toString()} on topic ${topic}`);
		            try {
		                const jsonMsg = JSON.parse(message.toString());
		                displayMessage(`Category: ${jsonMsg.category} - Value: ${jsonMsg.cat_value}`);
		            } catch (error) {
		                console.error("JSON Parse Error:", error);
		                displayMessage(`Raw Message: ${message.toString()}`);
		            }
		        });
		
		        function publishMessage() {
		            const userInput = document.getElementById("message").value;
		            const jsonPayload = {
		                category: "question",
		                cat_value: userInput
		            };
		            const jsonString = JSON.stringify(jsonPayload);
		            console.log("Sending:", jsonString);
		            client.publish("v000/c00001/d011/user", jsonString, (err) => {
		                if (err) console.error("Publish error:", err);
		            });
		        }
		
		        function displayMessage(msg) {
		            const msgList = document.getElementById("messages");
		            const newItem = document.createElement("li");
		            newItem.textContent = msg;
		            msgList.appendChild(newItem);
		        }
		    </script>
 
 
	</body>
</html>
